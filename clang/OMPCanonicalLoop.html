<!DOCTYPE html>
<meta charset="utf-8"/>
<title>class OMPCanonicalLoop</title>
<link rel="stylesheet" href="../clang-doc-default-stylesheet.css"/>
<script src="../index.js"></script>
<script src="../index_json.js"></script>
<header id="project-title">Subspace</header>
<main>
  <div id="sidebar-left" path="clang" class="col-xs-6 col-sm-3 col-md-2 sidebar sidebar-offcanvas-left"></div>
  <div id="main-content" class="col-xs-12 col-sm-9 col-md-8 main-content">
    <h1>class OMPCanonicalLoop</h1>
    <p>Defined at line 142 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
    <div>
      <div>
        <p> Representation of an OpenMP canonical loop.</p>
        <p> OpenMP 1.0 C/C++, section 2.4.1 for Construct; canonical-shape OpenMP 2.0 C/C++, section 2.4.1 for Construct; canonical-shape OpenMP 2.5, section 2.5.1 Loop Construct; canonical form OpenMP 3.1, section 2.5.1 Loop Construct; canonical form OpenMP 4.0, section 2.6 Canonical Loop Form OpenMP 4.5, section 2.6 Canonical Loop Form OpenMP 5.0, section 2.9.1 Canonical Loop Form OpenMP 5.1, section 2.11.1 Canonical Loop Nest Form</p>
        <p> An OpenMP canonical loop is a for-statement or range-based for-statement with additional requirements that ensure that the number of iterations is known before entering the loop and allow skipping to an arbitrary iteration. The OMPCanonicalLoop AST node wraps a ForStmt or CXXForRangeStmt that is known to fulfill OpenMP&apos;s canonical loop requirements because of being associated to an OMPLoopBasedDirective. That is, the general structure is:</p>
        <p>  OMPLoopBasedDirective [`- CapturedStmt   ] [   `- CapturedDecl]        ` OMPCanonicalLoop          `- ForStmt/CXXForRangeStmt             `- Stmt</p>
        <p> One or multiple CapturedStmt/CapturedDecl pairs may be inserted by some directives such as OMPParallelForDirective, but others do not need them (such as OMPTileDirective). In  The OMPCanonicalLoop and ForStmt/CXXForRangeStmt pair is repeated for loop associated with the directive. A OMPCanonicalLoop must not appear in the AST unless associated with a OMPLoopBasedDirective. In an imperfectly nested loop nest, the OMPCanonicalLoop may also be wrapped in a CompoundStmt:</p>
        <p> [...]  ` OMPCanonicalLoop    `- ForStmt/CXXForRangeStmt       `- CompoundStmt          |- Leading in-between code (if any)          |- OMPCanonicalLoop          |  `- ForStmt/CXXForRangeStmt          |     `- ...          `- Trailing in-between code (if any)</p>
        <p> The leading/trailing in-between code must not itself be a OMPCanonicalLoop to avoid confusion which loop belongs to the nesting.</p>
        <p> There are three different kinds of iteration variables for different purposes: * Loop user variable: The user-accessible variable with different value for   each iteration. * Loop iteration variable: The variable used to identify a loop iteration;   for range-based for-statement, this is the hidden iterator &apos;__begin&apos;. For   other loops, it is identical to the loop user variable. Must be a   random-access iterator, pointer or integer type. * Logical iteration counter: Normalized loop counter starting at 0 and   incrementing by one at each iteration. Allows abstracting over the type   of the loop iteration variable and is always an unsigned integer type   appropriate to represent the range of the loop iteration variable. Its   value corresponds to the logical iteration number in the OpenMP   specification.</p>
        <p> This AST node provides two captured statements: * The distance function which computes the number of iterations. * The loop user variable function that computes the loop user variable when   given a logical iteration number.</p>
        <p> These captured statements provide the link between C/C++ semantics and the logical iteration counters used by the OpenMPIRBuilder which is language-agnostic and therefore does not know e.g. how to advance a random-access iterator. The OpenMPIRBuilder will use this information to apply simd, workshare-loop, distribute, taskloop and loop directives to the loop. For compatibility with the non-OpenMPIRBuilder codegen path, an OMPCanonicalLoop can itself also be wrapped into the CapturedStmts of an OMPLoopDirective and skipped when searching for the associated syntactical loop.</p>
        <p> Example:   std::vector&lt;std::string&gt; Container{1,2,3};   for (std::string Str : Container)      Body(Str); which is syntactic sugar for approximately:   auto &amp;&amp;__range = Container;   auto __begin = std::begin(__range);   auto __end = std::end(__range);   for (; __begin != __end; ++__begin) {     std::String Str = *__begin;     Body(Str);   } In this example, the loop user variable is `Str`, the loop iteration variable is `__begin` of type `std::vector&lt;std::string&gt;::iterator` and the logical iteration number type is `size_t` (unsigned version of `std::vector&lt;std::string&gt;::iterator::difference_type` aka `ptrdiff_t`). Therefore, the distance function will be   [&amp;](size_t &amp;Result) { Result = __end - __begin; } and the loop variable function is   [&amp;,__begin](std::vector&lt;std::string&gt;::iterator &amp;Result, size_t Logical) {     Result = __begin + Logical;   } The variable `__begin`, aka the loop iteration variable, is captured by value because it is modified in the loop body, but both functions require the initial value. The OpenMP specification explicitly leaves unspecified when the loop expressions are evaluated such that a capture by reference is sufficient.</p>
      </div>
    </div>
    <p>
      Inherits from 
      <a href="Stmt.html">Stmt</a>
    </p>
    <h2 id="Functions">Functions</h2>
    <div>
      <h3 id="1D2976B0434AD1879230416ECBEE1F5BE135711D">create</h3>
      <p>public OMPCanonicalLoop * create(const ASTContext &amp; Ctx, Stmt * LoopStmt, CapturedStmt * DistanceFunc, CapturedStmt * LoopVarFunc, DeclRefExpr * LoopVarRef)</p>
      <p>Defined at line 163 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <div>
        <div>
          <p> Create a new OMPCanonicalLoop.</p>
        </div>
      </div>
      <h3 id="146FCE552B484A96F15D3034F1E244AEE19C8AE8">createEmpty</h3>
      <p>public OMPCanonicalLoop * createEmpty(const ASTContext &amp; Ctx)</p>
      <p>Defined at line 176 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <div>
        <div>
          <p> Create an empty OMPCanonicalLoop for deserialization.</p>
        </div>
      </div>
      <h3 id="D73657D5DF33B4A9C463A9F58914104FD65426C7">classof</h3>
      <p>public _Bool classof(const Stmt * S)</p>
      <p>Defined at line 180 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="E0150411E574994391B2F7885D9F7BEA424FE61B">getBeginLoc</h3>
      <p>
        public 
        <a href="SourceLocation.html">SourceLocation</a>
         getBeginLoc()
      </p>
      <p>Defined at line 184 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="310E997052A94EA758E35A0F691312FD666233E2">getEndLoc</h3>
      <p>
        public 
        <a href="SourceLocation.html">SourceLocation</a>
         getEndLoc()
      </p>
      <p>Defined at line 185 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="6C955BD7AF2B47AAD84155A53007B6827C9AEEB8">children</h3>
      <p>
        public 
        <a href="../llvm/iterator_range.html">iterator_range</a>
         children()
      </p>
      <p>Defined at line 189 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <div>
        <div>
          <p> Return this AST node&apos;s children.@{</p>
        </div>
      </div>
      <h3 id="869502B94381F5CEACF2458090CDA2EDE0991B04">children</h3>
      <p>
        public 
        <a href="../llvm/iterator_range.html">iterator_range</a>
         children()
      </p>
      <p>Defined at line 192 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="CA49FC2D92E05F7514BE124E97067A71C310D9D6">getLoopStmt</h3>
      <p>public Stmt * getLoopStmt()</p>
      <p>Defined at line 199 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <div>
        <div>
          <p> The wrapped syntactic loop statement (ForStmt or CXXForRangeStmt).@{</p>
        </div>
      </div>
      <h3 id="F9AA04CB0867B6F5A37E2CA885236D6E86554BCE">getLoopStmt</h3>
      <p>public const Stmt * getLoopStmt()</p>
      <p>Defined at line 200 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="564C6FA7B423DD91FBB56F8FEA3BC4A191693177">setLoopStmt</h3>
      <p>public void setLoopStmt(Stmt * S)</p>
      <p>Defined at line 201 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="EBAD68E1164B104C8E3878A45A236DD6CFBB196C">getDistanceFunc</h3>
      <p>public CapturedStmt * getDistanceFunc()</p>
      <p>Defined at line 215 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <div>
        <div>
          <p> The function that computes the number of loop iterations. Can be evaluated before entering the loop but after the syntactical loop&apos;s init statement(s).</p>
          <p> Function signature: void(LogicalTy &amp;Result) Any values necessary to compute the distance are captures of the closure.@{</p>
        </div>
      </div>
      <h3 id="5E17F7D9D25E2B72F42E014B5C2DC35D00DEB1F7">getDistanceFunc</h3>
      <p>public const CapturedStmt * getDistanceFunc()</p>
      <p>Defined at line 218 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="87C239093CB827DB2AE088B3A19CF97E0CE12BF2">setDistanceFunc</h3>
      <p>public void setDistanceFunc(CapturedStmt * S)</p>
      <p>Defined at line 221 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="CCD1E398D4D56E038A876E57350916B250DD7D31">getLoopVarFunc</h3>
      <p>public CapturedStmt * getLoopVarFunc()</p>
      <p>Defined at line 236 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <div>
        <div>
          <p> The function that computes the loop user variable from a logical iteration counter. Can be evaluated as first statement in the loop.</p>
          <p> Function signature: void(LoopVarTy &amp;Result, LogicalTy Number) Any other values required to compute the loop user variable (such as start value, step size) are captured by the closure. In particular, the initial value of loop iteration variable is captured by value to be unaffected by previous iterations.@{</p>
        </div>
      </div>
      <h3 id="25C9AB0DD61B0F24A61FF3CCD401DC31E5DA2CDC">getLoopVarFunc</h3>
      <p>public const CapturedStmt * getLoopVarFunc()</p>
      <p>Defined at line 239 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="A1AF3DDFFB014781B133FBADA9149C81EA1C3788">setLoopVarFunc</h3>
      <p>public void setLoopVarFunc(CapturedStmt * S)</p>
      <p>Defined at line 242 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="5BDC84C563D6526AF3A65CD307276FCB5290C1FF">getLoopVarRef</h3>
      <p>public DeclRefExpr * getLoopVarRef()</p>
      <p>Defined at line 250 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <div>
        <div>
          <p> Reference to the loop user variable as accessed in the loop body.@{</p>
        </div>
      </div>
      <h3 id="365418027243CD6B68C32745BF44BF23812BF5DE">getLoopVarRef</h3>
      <p>public const DeclRefExpr * getLoopVarRef()</p>
      <p>Defined at line 253 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
      <h3 id="C7E694567EF1C9D7E329E0971E6D56CD05BB58B0">setLoopVarRef</h3>
      <p>public void setLoopVarRef(DeclRefExpr * E)</p>
      <p>Defined at line 256 of file /usr/lib/llvm-16/include/clang/AST/StmtOpenMP.h</p>
    </div>
  </div>
  <div id="sidebar-right" class="col-xs-6 col-sm-6 col-md-2 sidebar sidebar-offcanvas-right">
    <ol>
      <li>
        <span>
          <a href="#Functions">Functions</a>
        </span>
        <ul>
          <li>
            <span>
              <a href="#1D2976B0434AD1879230416ECBEE1F5BE135711D">create</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#146FCE552B484A96F15D3034F1E244AEE19C8AE8">createEmpty</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#D73657D5DF33B4A9C463A9F58914104FD65426C7">classof</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#E0150411E574994391B2F7885D9F7BEA424FE61B">getBeginLoc</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#310E997052A94EA758E35A0F691312FD666233E2">getEndLoc</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#6C955BD7AF2B47AAD84155A53007B6827C9AEEB8">children</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#869502B94381F5CEACF2458090CDA2EDE0991B04">children</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#CA49FC2D92E05F7514BE124E97067A71C310D9D6">getLoopStmt</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#F9AA04CB0867B6F5A37E2CA885236D6E86554BCE">getLoopStmt</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#564C6FA7B423DD91FBB56F8FEA3BC4A191693177">setLoopStmt</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#EBAD68E1164B104C8E3878A45A236DD6CFBB196C">getDistanceFunc</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#5E17F7D9D25E2B72F42E014B5C2DC35D00DEB1F7">getDistanceFunc</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#87C239093CB827DB2AE088B3A19CF97E0CE12BF2">setDistanceFunc</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#CCD1E398D4D56E038A876E57350916B250DD7D31">getLoopVarFunc</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#25C9AB0DD61B0F24A61FF3CCD401DC31E5DA2CDC">getLoopVarFunc</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#A1AF3DDFFB014781B133FBADA9149C81EA1C3788">setLoopVarFunc</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#5BDC84C563D6526AF3A65CD307276FCB5290C1FF">getLoopVarRef</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#365418027243CD6B68C32745BF44BF23812BF5DE">getLoopVarRef</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#C7E694567EF1C9D7E329E0971E6D56CD05BB58B0">setLoopVarRef</a>
            </span>
          </li>
        </ul>
      </li>
    </ol>
  </div>
</main>
<footer>
  <span class="no-break">Ubuntu clang-doc version 16.0.0 (++20230103042323+3bbdd9f506c1-1~exp1~20230103042429.660)</span>
</footer>
