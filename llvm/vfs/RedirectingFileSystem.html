<!DOCTYPE html>
<meta charset="utf-8"/>
<title>class RedirectingFileSystem</title>
<link rel="stylesheet" href="../../clang-doc-default-stylesheet.css"/>
<script src="../../index.js"></script>
<script src="../../index_json.js"></script>
<header id="project-title">Subspace</header>
<main>
  <div id="sidebar-left" path="llvm/vfs" class="col-xs-6 col-sm-3 col-md-2 sidebar sidebar-offcanvas-left"></div>
  <div id="main-content" class="col-xs-12 col-sm-9 col-md-8 main-content">
    <h1>class RedirectingFileSystem</h1>
    <p>Defined at line 742 of file /usr/lib/llvm-16/include/llvm/Support/VirtualFileSystem.h</p>
    <div>
      <div>
        <p> A virtual file system parsed from a YAML file.</p>
        <p> Currently, this class allows creating virtual files and directories. Virtual files map to existing external files in  and virtual directories may either map to existing directories in  or list their contents in the form of other virtual directories and/or files.</p>
        <p> The basic structure of the parsed file is:</p>
        <p> The roots may be absolute or relative. If relative they will be made absolute against either current working directory or the directory where the Overlay YAML file is located, depending on the &apos;root-relative&apos; configuration.</p>
        <p> All configuration options are optional.   &apos;case-sensitive&apos;: &lt;boolean, default=(true for Posix, false for Windows)&gt;   &apos;use-external-names&apos;: &lt;boolean, default=true&gt;   &apos;root-relative&apos;: &lt;string, one of &apos;cwd&apos; or &apos;overlay-dir&apos;, default=&apos;cwd&apos;&gt;   &apos;overlay-relative&apos;: &lt;boolean, default=false&gt;   &apos;fallthrough&apos;: &lt;boolean, default=true, deprecated - use &apos;redirecting-with&apos;                   instead&gt;   &apos;redirecting-with&apos;: &lt;string, one of &apos;fallthrough&apos;, &apos;fallback&apos;, or                        &apos;redirect-only&apos;, default=&apos;fallthrough&apos;&gt;</p>
        <p> To clarify, &apos;root-relative&apos; option will prepend the current working directory, or the overlay directory to the &apos;roots-&gt;name&apos; field only if &apos;roots-&gt;name&apos; is a relative path. On the other hand, when &apos;overlay-relative&apos; is set to &apos;true&apos;, external paths will always be prepended with the overlay directory, even if external paths are not relative paths. The &apos;root-relative&apos; option has no interaction with the &apos;overlay-relative&apos; option.</p>
        <p> Virtual directories that list their contents are represented as</p>
        <p> The default attributes for such virtual directories are:</p>
        <p> When a path prefix matches such a directory, the next component in the path is matched against the entries in the &apos;contents&apos; array.</p>
        <p> Re-mapped directories, on the other hand, are represented as /// </p>
        <p> and inherit their attributes from the external directory. When a path prefix matches such an entry, the unmatched components are appended to the &apos;external-contents&apos; path, and the resulting path is looked up in the external file system instead.</p>
        <p> Re-mapped files are represented as</p>
        <p> Their attributes and file contents are determined by looking up the file at their &apos;external-contents&apos; path in the external file system.</p>
        <p> For &apos;file&apos;, &apos;directory&apos; and &apos;directory-remap&apos; entries the &apos;name&apos; field may contain multiple path components (e.g. /path/to/file). However, any directory in such a path that contains more than one child must be uniquely represented by a &apos;directory&apos; entry.</p>
        <p> When the &apos;use-external-name&apos; field is set, calls to  give the external (remapped) filesystem name instead of the name the file was accessed by. This is an intentional leak through the  abstraction layer. It enables clients to discover (and use) the external file location when communicating with users or tools that don&apos;t use the same VFS overlay.</p>
        <p> FIXME: &apos;use-external-name&apos; causes behaviour that&apos;s inconsistent with how &quot;real&quot; filesystems behave. Maybe there should be a separate channel for this information.</p>
      </div>
    </div>
    <p>
      Inherits from 
      <a href="FileSystem.html">FileSystem</a>
    </p>
    <h2 id="Records">Records</h2>
    <ul>
      <li>
        <a href="../../llvm/vfs/RedirectingFileSystem/Entry.html">Entry</a>
      </li>
      <li>
        <a href="../../llvm/vfs/RedirectingFileSystem/DirectoryEntry.html">DirectoryEntry</a>
      </li>
      <li>
        <a href="../../llvm/vfs/RedirectingFileSystem/RemapEntry.html">RemapEntry</a>
      </li>
      <li>
        <a href="../../llvm/vfs/RedirectingFileSystem/DirectoryRemapEntry.html">DirectoryRemapEntry</a>
      </li>
      <li>
        <a href="../../llvm/vfs/RedirectingFileSystem/FileEntry.html">FileEntry</a>
      </li>
      <li>
        <a href="../../llvm/vfs/RedirectingFileSystem/LookupResult.html">LookupResult</a>
      </li>
    </ul>
    <h2 id="Functions">Functions</h2>
    <div>
      <h3 id="502C9BE84BD4BB1EE4E3A23F2453930D8DDDD538">lookupPath</h3>
      <p>
        public ErrorOr&lt;LookupResult&gt; lookupPath(
        <a href="../../llvm/StringRef.html">StringRef</a>
         Path)
      </p>
      <div>
        <div>
          <p> Looks up  in  and returns a LookupResult giving the matched entry and, if the entry was a FileEntry or DirectoryRemapEntry, the path it redirects to in the external file system.</p>
        </div>
      </div>
      <h3 id="DE5FEEBBF3EEBE5DB6F139D6649C5DB7B7DF2B95">create</h3>
      <p>
        public std::unique_ptr&lt;RedirectingFileSystem&gt; create(
        <a href="../../std/unique_ptr.html">unique_ptr</a>
         Buffer, class SourceMgr::DiagHandlerTy DiagHandler, 
        <a href="../../llvm/StringRef.html">StringRef</a>
         YAMLFilePath, void * DiagContext, 
        <a href="../../llvm/IntrusiveRefCntPtr.html">IntrusiveRefCntPtr</a>
         ExternalFS)
      </p>
      <div>
        <div>
          <p> Parses  which is expected to be in YAML format and returns a virtual file system representing its contents.</p>
        </div>
      </div>
      <h3 id="3109E59D27D05447C1A94EC6EF3D75B7A546BF0E">create</h3>
      <p>public std::unique_ptr&lt;RedirectingFileSystem&gt; create(ArrayRef&lt;std::pair&lt;std::string, std::string&gt; &gt; RemappedFiles, _Bool UseExternalNames, FileSystem &amp; ExternalFS)</p>
      <div>
        <div>
          <p> Redirect each of the remapped files from first to second.</p>
        </div>
      </div>
      <h3 id="D63D2693980E90A62073B04101E2126A3A26791C">status</h3>
      <p>
        public 
        <a href="../../llvm/ErrorOr.html">ErrorOr</a>
         status(const Twine &amp; Path)
      </p>
      <h3 id="DE710361B5EC941751A9D734581FE3EFDF571134">openFileForRead</h3>
      <p>
        public 
        <a href="../../llvm/ErrorOr.html">ErrorOr</a>
         openFileForRead(const Twine &amp; Path)
      </p>
      <h3 id="0C44A9F07E263A241FC829E841CA74C03CE6A063">getRealPath</h3>
      <p>
        public 
        <a href="../../std/error_code.html">error_code</a>
         getRealPath(const Twine &amp; Path, SmallVectorImpl&lt;char&gt; &amp; Output)
      </p>
      <h3 id="9E728EB2EE37935EBC628F32CFF4FC2B209B35B3">getCurrentWorkingDirectory</h3>
      <p>
        public 
        <a href="../../llvm/ErrorOr.html">ErrorOr</a>
         getCurrentWorkingDirectory()
      </p>
      <h3 id="3142CE8F594AEB1BB87DEE56100E24F9CD97AB9E">setCurrentWorkingDirectory</h3>
      <p>
        public 
        <a href="../../std/error_code.html">error_code</a>
         setCurrentWorkingDirectory(const Twine &amp; Path)
      </p>
      <h3 id="505C54D3EEBA39915AD4DD9BE463E30E4F9ECCF8">isLocal</h3>
      <p>
        public 
        <a href="../../std/error_code.html">error_code</a>
         isLocal(const Twine &amp; Path, _Bool &amp; Result)
      </p>
      <h3 id="C0D69E51B5F4C43ADE49346885359443BF40D605">makeAbsolute</h3>
      <p>
        public 
        <a href="../../std/error_code.html">error_code</a>
         makeAbsolute(SmallVectorImpl&lt;char&gt; &amp; Path)
      </p>
      <h3 id="94559F7784BBF3DE26DF4DB07382C07ECE61257D">dir_begin</h3>
      <p>
        public 
        <a href="directory_iterator.html">directory_iterator</a>
         dir_begin(const Twine &amp; Dir, std::error_code &amp; EC)
      </p>
      <h3 id="2F4B3D5AE3FAE30503353A155443686C0EA21F03">setOverlayFileDir</h3>
      <p>
        public void setOverlayFileDir(
        <a href="../../llvm/StringRef.html">StringRef</a>
         PrefixDir)
      </p>
      <h3 id="E3873D7747DD0E50939FB60708321A0AA5F3D29D">getOverlayFileDir</h3>
      <p>
        public 
        <a href="../../llvm/StringRef.html">StringRef</a>
         getOverlayFileDir()
      </p>
      <h3 id="605087F1CFB53CFD8CA277DE007109E404FA8FA2">setFallthrough</h3>
      <p>public void setFallthrough(_Bool Fallthrough)</p>
      <div>
        <div>
          <p> Sets the redirection kind to  if true or  otherwise. Will removed in the future, use  instead.</p>
        </div>
      </div>
      <h3 id="4F1DC7871FB3F835F2A2081E8A834D60BACE6E8E">setRedirection</h3>
      <p>
        public void setRedirection(
        <a href="../../llvm/vfs/RedirectingFileSystem/RedirectKind.html">RedirectKind</a>
         Kind)
      </p>
      <h3 id="4EB2E1DDA2FA501065E2CC3205BD0E80B73F5A25">getRoots</h3>
      <p>
        public 
        <a href="../../std/vector.html">vector</a>
         getRoots()
      </p>
      <h3 id="FAE7976EA9D978984205A07BCE5065E90D9FBC63">printEntry</h3>
      <p>public void printEntry(raw_ostream &amp; OS, Entry * E, unsigned int IndentLevel)</p>
      <h3 id="8A27E21CA7348F0E15406FDD059E4A5DDBED506E">printImpl</h3>
      <p>
        protected void printImpl(raw_ostream &amp; OS, 
        <a href="../../llvm/vfs/FileSystem/PrintType.html">PrintType</a>
         Type, unsigned int IndentLevel)
      </p>
    </div>
    <h2 id="Enums">Enums</h2>
    <div>
      <h3 id="1156CDE940B4C85F6F2B34FF4B86486EAAB4B1D0">enum EntryKind</h3>
      <ul>
        <li>EK_Directory</li>
        <li>EK_DirectoryRemap</li>
        <li>EK_File</li>
      </ul>
      <p>Defined at line 744 of file /usr/lib/llvm-16/include/llvm/Support/VirtualFileSystem.h</p>
      <h3 id="8FB9D7D6A9682BF94B1BDDF6386AF6DD00C61DB8">enum NameKind</h3>
      <ul>
        <li>NK_NotSet</li>
        <li>NK_External</li>
        <li>NK_Virtual</li>
      </ul>
      <p>Defined at line 745 of file /usr/lib/llvm-16/include/llvm/Support/VirtualFileSystem.h</p>
      <h3 id="6463EDE3A1438562BA805115A0901544283B0B78">enum class RedirectKind</h3>
      <ul>
        <li>Fallthrough</li>
        <li>Fallback</li>
        <li>RedirectOnly</li>
      </ul>
      <p>Defined at line 748 of file /usr/lib/llvm-16/include/llvm/Support/VirtualFileSystem.h</p>
      <div>
        <div>
          <p> The type of redirection to perform.</p>
        </div>
      </div>
      <h3 id="B6359021256E29F0AD9495E2A26FE68CFB0810F0">enum class RootRelativeKind</h3>
      <ul>
        <li>CWD</li>
        <li>OverlayDir</li>
      </ul>
      <p>Defined at line 762 of file /usr/lib/llvm-16/include/llvm/Support/VirtualFileSystem.h</p>
      <div>
        <div>
          <p> The type of relative path used by Roots.</p>
        </div>
      </div>
    </div>
  </div>
  <div id="sidebar-right" class="col-xs-6 col-sm-6 col-md-2 sidebar sidebar-offcanvas-right">
    <ol>
      <li>
        <span>
          <a href="#Records">Records</a>
        </span>
      </li>
      <li>
        <span>
          <a href="#Functions">Functions</a>
        </span>
        <ul>
          <li>
            <span>
              <a href="#502C9BE84BD4BB1EE4E3A23F2453930D8DDDD538">lookupPath</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#DE5FEEBBF3EEBE5DB6F139D6649C5DB7B7DF2B95">create</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#3109E59D27D05447C1A94EC6EF3D75B7A546BF0E">create</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#D63D2693980E90A62073B04101E2126A3A26791C">status</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#DE710361B5EC941751A9D734581FE3EFDF571134">openFileForRead</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#0C44A9F07E263A241FC829E841CA74C03CE6A063">getRealPath</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#9E728EB2EE37935EBC628F32CFF4FC2B209B35B3">getCurrentWorkingDirectory</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#3142CE8F594AEB1BB87DEE56100E24F9CD97AB9E">setCurrentWorkingDirectory</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#505C54D3EEBA39915AD4DD9BE463E30E4F9ECCF8">isLocal</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#C0D69E51B5F4C43ADE49346885359443BF40D605">makeAbsolute</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#94559F7784BBF3DE26DF4DB07382C07ECE61257D">dir_begin</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#2F4B3D5AE3FAE30503353A155443686C0EA21F03">setOverlayFileDir</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#E3873D7747DD0E50939FB60708321A0AA5F3D29D">getOverlayFileDir</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#605087F1CFB53CFD8CA277DE007109E404FA8FA2">setFallthrough</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#4F1DC7871FB3F835F2A2081E8A834D60BACE6E8E">setRedirection</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#4EB2E1DDA2FA501065E2CC3205BD0E80B73F5A25">getRoots</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#FAE7976EA9D978984205A07BCE5065E90D9FBC63">printEntry</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#8A27E21CA7348F0E15406FDD059E4A5DDBED506E">printImpl</a>
            </span>
          </li>
        </ul>
      </li>
      <li>
        <span>
          <a href="#Enums">Enums</a>
        </span>
        <ul>
          <li>
            <span>
              <a href="#1156CDE940B4C85F6F2B34FF4B86486EAAB4B1D0">EntryKind</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#8FB9D7D6A9682BF94B1BDDF6386AF6DD00C61DB8">NameKind</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#6463EDE3A1438562BA805115A0901544283B0B78">RedirectKind</a>
            </span>
          </li>
          <li>
            <span>
              <a href="#B6359021256E29F0AD9495E2A26FE68CFB0810F0">RootRelativeKind</a>
            </span>
          </li>
        </ul>
      </li>
    </ol>
  </div>
</main>
<footer>
  <span class="no-break">Ubuntu clang-doc version 16.0.0 (++20230103042323+3bbdd9f506c1-1~exp1~20230103042429.660)</span>
</footer>
